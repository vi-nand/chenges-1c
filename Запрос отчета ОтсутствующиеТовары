ВЫБРАТЬ
	ВложенныйЗапрос.Номенклатура КАК Номенклатура,
	ВложенныйЗапрос.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ВложенныйЗапрос.Размер КАК Размер,
	гСоотвествиеНоменклатурыПоставщиков.Артикул КАК АртикулПоставщика,
	гСоотвествиеНоменклатурыПоставщиков.Контрагент КАК Поставщик,
	гСоотвествиеНоменклатурыПоставщиков.Наименование КАК НаименованиеПоставщика,
	гФото.Ссылка КАК ФотоСсылкаНаСправочник,
	СУММА(ВложенныйЗапрос.КоличествоЗаказано) КАК КоличествоЗаказано,
	СУММА(ВложенныйЗапрос.КоличествоОстаток) КАК КоличествоОстаток,
	СУММА(ВложенныйЗапрос.КоличествоЗаказано - ВложенныйЗапрос.КоличествоОстаток) КАК КоличествоЗаказатьЗнч,
	СУММА(ВложенныйЗапрос.КоличествоНаСкладеПоставщика) КАК КоличествоНаСкладеПоставщика,
	СУММА(ВложенныйЗапрос.КоличествоОстатокРеквизит) КАК КоличествоОстатокРеквизит,
	СУММА(ВложенныйЗапрос.Создано) КАК Создано
ИЗ
	(ВЫБРАТЬ
		ЗаказКлиентаТовары.Номенклатура КАК Номенклатура,
		ЗаказКлиентаТовары.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
		ЗаказКлиентаТовары.Размер КАК Размер,
		СУММА(ВЫБОР
				КОГДА НЕ(ЗаказКлиентаТовары.Ссылка.СтатусЗаявки.Код = 15
							ИЛИ ЗаказКлиентаТовары.Ссылка.СтатусЗаявки.Код = 20)
					ТОГДА ЗаказКлиентаТовары.Количество
				ИНАЧЕ 0
			КОНЕЦ) КАК КоличествоЗаказано,
		СУММА(0) КАК КоличествоНаСкладеПоставщика,
		СУММА(0) КАК КоличествоОстатокРеквизит,
		СУММА(0) КАК КоличествоОстаток,
		СУММА(ВЫБОР
				КОГДА ЗаказКлиентаТовары.Ссылка.СтатусЗаявки.Код = 15
						ИЛИ ЗаказКлиентаТовары.Ссылка.СтатусЗаявки.Код = 20
					ТОГДА ЗаказКлиентаТовары.Количество
				ИНАЧЕ 0
			КОНЕЦ) КАК Создано
	ИЗ
		Документ.ЗаказКлиента.Товары КАК ЗаказКлиентаТовары
	ГДЕ
		ЗаказКлиентаТовары.Номенклатура.Услуга = ЛОЖЬ
		И ЗаказКлиентаТовары.Ссылка.СтатусЗаявки В(&СтатусЗаявки)
		И ЗаказКлиентаТовары.Ссылка.Дата МЕЖДУ &Дата1 И &Дата2
	
	СГРУППИРОВАТЬ ПО
		ЗаказКлиентаТовары.Номенклатура,
		ЗаказКлиентаТовары.ХарактеристикаНоменклатуры,
		ЗаказКлиентаТовары.Размер
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.Номенклатура,
		СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.ХарактеристикаНоменклатуры,
		СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.Размер,
		СУММА(0),
		СУММА(СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.КоличествоОстаток),
		СУММА(0),
		СУММА(0),
		0
	ИЗ
		РегистрНакопления.СведенияОбОстаткахТоваровНаСкладеПоставщика.Остатки КАК СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки
	
	СГРУППИРОВАТЬ ПО
		СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.Номенклатура,
		СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.ХарактеристикаНоменклатуры,
		СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.Размер
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ПартииТоваровНаСкладахОстатки.Номенклатура,
		ПартииТоваровНаСкладахОстатки.ХарактеристикаНоменклатуры,
		ПартииТоваровНаСкладахОстатки.Размер,
		СУММА(0),
		СУММА(0),
		СУММА(ПартииТоваровНаСкладахОстатки.КоличествоОстаток),
		СУММА(0),
		0
	ИЗ
		РегистрНакопления.ПартииТоваровНаСкладах.Остатки КАК ПартииТоваровНаСкладахОстатки
	ГДЕ
		ПартииТоваровНаСкладахОстатки.Склад = &СкладРеквизит
	
	СГРУППИРОВАТЬ ПО
		ПартииТоваровНаСкладахОстатки.Номенклатура,
		ПартииТоваровНаСкладахОстатки.ХарактеристикаНоменклатуры,
		ПартииТоваровНаСкладахОстатки.Размер
ВЫБРАТЬ
	ВложенныйЗапрос.Номенклатура КАК Номенклатура,
	ВложенныйЗапрос.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ВложенныйЗапрос.Размер КАК Размер,
	гСоотвествиеНоменклатурыПоставщиков.Артикул КАК АртикулПоставщика,
	гСоотвествиеНоменклатурыПоставщиков.Контрагент КАК Поставщик,
	гСоотвествиеНоменклатурыПоставщиков.Наименование КАК НаименованиеПоставщика,
	гФото.Ссылка КАК ФотоСсылкаНаСправочник,
	СУММА(ВложенныйЗапрос.КоличествоЗаказано) КАК КоличествоЗаказано,
	СУММА(ВложенныйЗапрос.КоличествоОстаток) КАК КоличествоОстаток,
	СУММА(ВложенныйЗапрос.КоличествоЗаказано - ВложенныйЗапрос.КоличествоОстаток) КАК КоличествоЗаказатьЗнч,
	СУММА(ВложенныйЗапрос.КоличествоНаСкладеПоставщика) КАК КоличествоНаСкладеПоставщика,
	СУММА(ВложенныйЗапрос.КоличествоОстатокРеквизит) КАК КоличествоОстатокРеквизит,
	СУММА(ВложенныйЗапрос.Создано) КАК Создано
ИЗ
	(ВЫБРАТЬ
		ЗаказКлиентаТовары.Номенклатура КАК Номенклатура,
		ЗаказКлиентаТовары.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
		ЗаказКлиентаТовары.Размер КАК Размер,
		СУММА(ВЫБОР
				КОГДА НЕ(ЗаказКлиентаТовары.Ссылка.СтатусЗаявки.Код = 15
							ИЛИ ЗаказКлиентаТовары.Ссылка.СтатусЗаявки.Код = 20)
					ТОГДА ЗаказКлиентаТовары.Количество
				ИНАЧЕ 0
			КОНЕЦ) КАК КоличествоЗаказано,
		СУММА(0) КАК КоличествоНаСкладеПоставщика,
		СУММА(0) КАК КоличествоОстатокРеквизит,
		СУММА(0) КАК КоличествоОстаток,
		СУММА(ВЫБОР
				КОГДА ЗаказКлиентаТовары.Ссылка.СтатусЗаявки.Код = 15
						ИЛИ ЗаказКлиентаТовары.Ссылка.СтатусЗаявки.Код = 20
					ТОГДА ЗаказКлиентаТовары.Количество
				ИНАЧЕ 0
			КОНЕЦ) КАК Создано
	ИЗ
		Документ.ЗаказКлиента.Товары КАК ЗаказКлиентаТовары
	ГДЕ
		ЗаказКлиентаТовары.Номенклатура.Услуга = ЛОЖЬ
		И ЗаказКлиентаТовары.Ссылка.СтатусЗаявки В(&СтатусЗаявки)
		И ЗаказКлиентаТовары.Ссылка.Дата МЕЖДУ &Дата1 И &Дата2
	
	СГРУППИРОВАТЬ ПО
		ЗаказКлиентаТовары.Номенклатура,
		ЗаказКлиентаТовары.ХарактеристикаНоменклатуры,
		ЗаказКлиентаТовары.Размер
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.Номенклатура,
		СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.ХарактеристикаНоменклатуры,
		СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.Размер,
		СУММА(0),
		СУММА(СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.КоличествоОстаток),
		СУММА(0),
		СУММА(0),
		0
	ИЗ
		РегистрНакопления.СведенияОбОстаткахТоваровНаСкладеПоставщика.Остатки КАК СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки
	
	СГРУППИРОВАТЬ ПО
		СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.Номенклатура,
		СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.ХарактеристикаНоменклатуры,
		СведенияОбОстаткахТоваровНаСкладеПоставщикаОстатки.Размер
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ПартииТоваровНаСкладахОстатки.Номенклатура,
		ПартииТоваровНаСкладахОстатки.ХарактеристикаНоменклатуры,
		ПартииТоваровНаСкладахОстатки.Размер,
		СУММА(0),
		СУММА(0),
		СУММА(ПартииТоваровНаСкладахОстатки.КоличествоОстаток),
		СУММА(0),
		0
	ИЗ
		РегистрНакопления.ПартииТоваровНаСкладах.Остатки КАК ПартииТоваровНаСкладахОстатки
	ГДЕ
		ПартииТоваровНаСкладахОстатки.Склад = &СкладРеквизит
	
	СГРУППИРОВАТЬ ПО
		ПартииТоваровНаСкладахОстатки.Номенклатура,
		ПартииТоваровНаСкладахОстатки.ХарактеристикаНоменклатуры,
		ПартииТоваровНаСкладахОстатки.Размер
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ПартииТоваровНаСкладахОстатки.Номенклатура,
		ПартииТоваровНаСкладахОстатки.ХарактеристикаНоменклатуры,
		ПартииТоваровНаСкладахОстатки.Размер,
		СУММА(0),
		СУММА(0),
		СУММА(0),
		СУММА(ПартииТоваровНаСкладахОстатки.КоличествоОстаток),
		0
	ИЗ
		РегистрНакопления.ПартииТоваровНаСкладах.Остатки КАК ПартииТоваровНаСкладахОстатки
	ГДЕ
		ПартииТоваровНаСкладахОстатки.Склад = &СкладОсновной
	
	СГРУППИРОВАТЬ ПО
		ПартииТоваровНаСкладахОстатки.Номенклатура,
		ПартииТоваровНаСкладахОстатки.ХарактеристикаНоменклатуры,
		ПартииТоваровНаСкладахОстатки.Размер) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.гСоотвествиеНоменклатурыПоставщиков КАК гСоотвествиеНоменклатурыПоставщиков
		ПО ВложенныйЗапрос.Номенклатура = гСоотвествиеНоменклатурыПоставщиков.Владелец
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.гФото КАК гФото
		ПО ВложенныйЗапрос.Номенклатура = гФото.Номенклатура

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос.Номенклатура,
	ВложенныйЗапрос.ХарактеристикаНоменклатуры,
	ВложенныйЗапрос.Размер,
	гСоотвествиеНоменклатурыПоставщиков.Артикул,
	гСоотвествиеНоменклатурыПоставщиков.Контрагент,
	гСоотвествиеНоменклатурыПоставщиков.Наименование,
	гФото.Ссылка

УПОРЯДОЧИТЬ ПО
	Поставщик,
	НаименованиеПоставщика,
	Номенклатура,
	Размер
